<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Product Details | Ultra Nutritions Sri Lanka</title>
    <meta name="description" id="meta-description" content="Buy authentic bodybuilding supplements, whey protein, and sports nutrition in Sri Lanka. Best prices, island-wide delivery at Ultra Nutritions.">
    
    <meta name="keywords" content="Supplement price in Sri Lanka, Best supplement Shop in Sri Lanka, Protein supplement Sri Lanka, Online supplement store Sri Lanka, Whey Protein 1kg price in Sri Lanka, whey protein sri lanka, whey protein price in sri lanka, whey protein supplement, whey protein powder, whey protein isolate, whey protein gold standard, Top 10 bodybuilding supplements, Bodybuilding supplements near me, Bodybuilding supplements Sri Lanka, Bodybuilding Supplements price in sri lanka, Bodybuilding supplements list, Supplement lk, Supplement Factory, Top 3 bodybuilding supplements, Supplement factory Sri Lanka, Supplement Shop colombo, Supplement Sri Lanka price, Fitness Island, Supplement Shop Galle, supplement shops in sri lanka, supplement warehouse, supplement store">
    
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    
    <style>
        :root { --primary-color: #e63946; --dark-color: #1a1a1a; --bg-color: #121212; --whatsapp-color: #25D366; --text-light: #f4f4f4;}
        
        body {
            font-family: 'Poppins', sans-serif;
            /* Update to Dark Gym Fixed Background */
            background:
                linear-gradient(rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.8)),
                url('https://images.unsplash.com/photo-1534438327276-14e5300c3a48?q=80&w=1470&auto=format&fit=crop') center/cover no-repeat fixed;
            margin: 0;
            padding: 0;
            color: var(--text-light); /* Light text overall outside cards */
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        
        header { background-color: var(--dark-color); color: white; padding: 15px 10px; text-align: center; box-shadow: 0 4px 6px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 100; }
        .header-link { text-decoration: none; color: inherit; display: inline-block; cursor: pointer; }
        header h1 { margin: 0; font-size: 24px; font-weight: 700; letter-spacing: 1px; text-transform: uppercase; }
        header h1 span { color: var(--primary-color); }
        header p { margin: 5px 0 0; font-size: 12px; color: #ccc; }
        
        .container { max-width: 1200px; margin: 30px auto; padding: 0 15px; box-sizing: border-box; flex-grow: 1;}
        
        /* Updated Breadcrumb for Dark Background */
        .breadcrumb { display: inline-flex; align-items: center; gap: 8px; color: #aaa; text-decoration: none; font-weight: 500; margin-bottom: 20px; font-size: 14px; transition: color 0.3s; }
        .breadcrumb:hover { color: var(--primary-color); }

        .product-layout { 
            display: flex; flex-direction: row; flex-wrap: wrap; 
            background: white; /* Card remains white for contrast */
            color: #333; /* Dark text inside card */
            border-radius: 12px;
            overflow: hidden; 
            box-shadow: 0 10px 40px rgba(0,0,0,0.5); /* Stronger shadow on dark background */
            border: 1px solid #444;
        }

        /* IMAGE SLIDER CSS */
        .product-image-container { 
            flex: 1; min-width: 320px; padding: 20px; 
            background: #fff; border-right: 1px solid #f4f4f4;
            position: relative; display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .slider { position: relative; width: 100%; max-width: 400px; overflow: hidden; height: 400px; display: flex; align-items: center; }
        .slides { display: flex; transition: transform 0.5s ease-in-out; width: 100%; height: 100%; }
        .slide { min-width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; }
        .slide img { max-width: 100%; max-height: 100%; object-fit: contain; }
        
        .slider-btn { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(0,0,0,0.2); color: #555; border: none; width: 35px; height: 35px; border-radius: 50%; cursor: pointer; z-index: 10; transition: 0.3s; display: none; }
        .slider-btn:hover { background: var(--primary-color); color: white; }
        .prev { left: 10px; }
        .next { right: 10px; }

        .dots { display: flex; justify(content): center; gap: 8px; margin-top: 15px; }
        .dot { width: 8px; height: 8px; background: #ddd; border-radius: 50%; cursor: pointer; transition: 0.3s; }
        .dot.active { background: var(--primary-color); width: 20px; border-radius: 10px; }

        /* INFO CSS */
        .product-info { flex: 1.2; min-width: 320px; padding: 40px; box-sizing: border-box; display: flex; flex-direction: column; color: #333;}
        .cat-badge { display: inline-block; background: #eee; padding: 6px 14px; border-radius: 20px; font-size: 11px; font-weight: 600; color: #555; text-transform: uppercase; margin-bottom: 15px; border: 1px solid #ddd; }
        .product-info h1 { margin: 0 0 10px 0; font-size: 28px; color: var(--dark-color); font-weight: 700; line-height: 1.3; }
        .price-wrapper { display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px; padding-bottom: 20px; border-bottom: 1px solid #ddd;}
        .price { font-size: 28px; color: var(--primary-color); font-weight: 700; margin: 0; }
        .status-badge { display: inline-block; padding: 6px 14px; border-radius: 6px; font-size: 12px; font-weight: 700; color: white; text-transform: uppercase; }
        .in-stock { background-color: #198754; }
        .out-of-stock { background-color: var(--primary-color); }

        .description-section { margin-bottom: 30px; flex-grow: 1;}
        .description-title { font-size: 16px; font-weight: 600; color: var(--dark-color); margin-bottom: 15px; display: block; text-transform: uppercase; }
        .description-content { font-size: 14px; color: #555; line-height: 1.8; }
        .description-content ul { padding-left: 0; margin: 0; list-style: none; }
        .description-content li { margin-bottom: 10px; position: relative; padding-left: 25px; }
        .description-content li::before { content: "\f00c"; font-family: "Font Awesome 6 Free"; font-weight: 900; color: var(--primary-color); position: absolute; left: 0; top: 2px; font-size: 12px; }

        .buy-btn { background: var(--whatsapp-color); color: white; padding: 16px; border: none; width: 100%; cursor: pointer; border-radius: 8px; font-size: 16px; font-weight: 600; display: flex; align-items: center; justify-content: center; gap: 10px; transition: all 0.3s ease; text-transform: uppercase; }
        .buy-btn:hover:not(:disabled) { background: #20b858; transform: translateY(-2px); }
        .buy-btn:disabled { background: #e0e0e0; color: #999; cursor: not-allowed; }

        .trust-badges { display: flex; gap: 20px; margin-top: 30px; border-top: 1px solid #ddd; padding-top: 20px; flex-wrap: wrap;}
        .trust-badge { display: flex; align-items: center; gap: 8px; font-size: 13px; color: #555; font-weight: 500;}
        .trust-badge i { color: var(--primary-color); font-size: 18px;}

        .seo-footer { background-color: var(--dark-color); color: #aaa; padding: 30px 15px; text-align: center; margin-top: 50px; font-size: 12px; border-top: 1px solid #333; }

        @media (max-width: 768px) {
            .product-layout { flex-direction: column; }
            .product-image-container { border-right: none; border-bottom: 1px solid #f4f4f4; padding: 20px; }
            .slider { height: 300px; }
        }

        /* Light Loading Text for Dark BG */
        .loading { text-align: center; padding: 100px; font-size: 16px; color: #ccc; width: 100%;}
        .spinner { border: 3px solid rgba(0,0,0,0.1); width: 40px; height: 40px; border-radius: 50%; border-left-color: var(--primary-color); animation: spin 1s linear infinite; margin: 0 auto 15px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>

    <header>
        <a href="index.html" class="header-link">
            <h1>Ultra <span>Nutritions</span></h1>
            <p>Top Rated Supplement Store in Sri Lanka</p>
        </a>
    </header>

    <div class="container" id="productContainer">
        <div class="loading">
            <div class="spinner"></div>
            Loading product details...
        </div>
    </div>

    <footer class="seo-footer">
        <p><strong>Ultra Nutritions</strong> is your trusted online supplement store in Sri Lanka. 100% authentic products with island-wide delivery.</p>
        <p>&copy; 2024 Ultra Nutritions. All Rights Reserved.</p>
    </footer>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyChnk_4ncFbSBkAPqEZQy0Bow-h2cVTLrs",
            authDomain: "ultranutritions.firebaseapp.com",
            projectId: "ultranutritions",
            storageBucket: "ultranutritions.firebasestorage.app",
            messagingSenderId: "904882148450",
            appId: "1:904882148450:web:c4784968cd03e63b3cad3b"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const MY_WHATSAPP_NUMBER = "94713640047";

        const urlParams = new URLSearchParams(window.location.search);
        const productId = urlParams.get('id');
        const container = document.getElementById("productContainer");

        if(!productId) {
            window.location.href = 'index.html';
        } else {
            db.collection("supplements").doc(productId).get().then((doc) => {
                if(doc.exists) {
                    let item = doc.data();
                    let stockStatus = item.stockStatus || "In Stock";
                    let isOutOfStock = stockStatus === "Out of Stock";
                    
                    // Collect images
                    let images = [];
                    if(item.image) images.push(item.image);
                    if(item.image2) images.push(item.image2);
                    if(images.length === 0) images.push("https://via.placeholder.com/400x400?text=No+Image");

                    let descHTML = item.description ? "<ul>" + item.description.split('\n').map(line => line.trim() ? `<li>${line}</li>` : "").join('') + "</ul>" : "<p>Premium quality supplement.</p>";
                    let whatsappUrl = `https://wa.me/${MY_WHATSAPP_NUMBER}?text=${encodeURIComponent(`Hello Ultra Nutritions! I want to buy:\n\n*Item:* ${item.name}\n*Price:* Rs. ${item.price}\n\nIs this available?`)}`;

                    container.innerHTML = `
                        <a href="index.html" class="breadcrumb"><i class="fas fa-arrow-left"></i> Back to Products</a>
                        <div class="product-layout">
                            <div class="product-image-container">
                                <div class="slider">
                                    <div class="slides" id="slides">
                                        ${images.map(img => `<div class="slide"><img src="${img}" alt="${item.name}" style="${isOutOfStock ? 'opacity: 0.5; filter: grayscale(100%);' : ''}"></div>`).join('')}
                                    </div>
                                    <button class="slider-btn prev" id="prevBtn" onclick="moveSlide(-1)"><i class="fas fa-chevron-left"></i></button>
                                    <button class="slider-btn next" id="nextBtn" onclick="moveSlide(1)"><i class="fas fa-chevron-right"></i></button>
                                </div>
                                <div class="dots" id="dotsContainer">
                                    ${images.length > 1 ? images.map((_, i) => `<div class="dot ${i===0?'active':''}" onclick="currentSlide(${i})"></div>`).join('') : ''}
                                </div>
                            </div>
                            <div class="product-info">
                                <span class="cat-badge">${item.category || 'Supplement'}</span>
                                <h1>${item.name}</h1>
                                <div class="price-wrapper">
                                    <p class="price">Rs. ${item.price}</p>
                                    <div class="status-badge ${isOutOfStock ? 'out-of-stock' : 'in-stock'}">${stockStatus}</div>
                                </div>
                                <div class="description-section">
                                    <span class="description-title">Product Highlights</span>
                                    <div class="description-content">${descHTML}</div>
                                </div>
                                <button class="buy-btn" ${isOutOfStock ? 'disabled' : ''} onclick="window.open('${whatsappUrl}', '_blank')">
                                    <i class="fab fa-whatsapp"></i> ${isOutOfStock ? 'Out of Stock' : 'Order via WhatsApp'}
                                </button>
                                <div class="trust-badges">
                                    <div class="trust-badge"><i class="fas fa-shield-alt"></i> 100% Authentic</div>
                                    <div class="trust-badge"><i class="fas fa-truck-fast"></i> Fast Delivery</div>
                                    <div class="trust-badge"><i class="fas fa-medal"></i> Top Brands</div>
                                </div>
                            </div>
                        </div>
                    `;

                    if(images.length > 1) {
                        document.getElementById('prevBtn').style.display = 'block';
                        document.getElementById('nextBtn').style.display = 'block';
                    }
                }
            });
        }

        let slideIndex = 0;
        function moveSlide(step) {
            const slides = document.getElementById("slides");
            const dots = document.querySelectorAll(".dot");
            const totalSlides = slides.children.length;
            slideIndex = (slideIndex + step + totalSlides) % totalSlides;
            slides.style.transform = `translateX(-${slideIndex * 100}%)`;
            dots.forEach(dot => dot.classList.remove("active"));
            dots[slideIndex].classList.add("active");
        }
        function currentSlide(index) {
            slideIndex = index;
            const slides = document.getElementById("slides");
            const dots = document.querySelectorAll(".dot");
            slides.style.transform = `translateX(-${slideIndex * 100}%)`;
            dots.forEach(dot => dot.classList.remove("active"));
            dots[slideIndex].classList.add("active");
        }
    </script>
</body>
</html>
